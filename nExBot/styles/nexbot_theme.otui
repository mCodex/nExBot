/*
  ╔══════════════════════════════════════════════════════════════════════════╗
  ║                    nExBot Design System v2.0                             ║
  ║══════════════════════════════════════════════════════════════════════════║
  ║                                                                          ║
  ║  A modern, accessible, and delightful design system built on:            ║
  ║  • SOLID principles - Single responsibility components                   ║
  ║  • DRY - Reusable design tokens and base widgets                        ║
  ║  • KISS - Simple, composable building blocks                            ║
  ║  • Performance - Minimal nesting, efficient rendering                    ║
  ║                                                                          ║
  ║  ARCHITECTURE:                                                           ║
  ║  ┌─────────────┐                                                         ║
  ║  │   Tokens    │ ← Colors, spacing, typography                          ║
  ║  ├─────────────┤                                                         ║
  ║  │   Atoms     │ ← Base widgets (Button, Input, Label)                  ║
  ║  ├─────────────┤                                                         ║
  ║  │  Molecules  │ ← Composite widgets (ModuleCard, ProfileBar)           ║
  ║  ├─────────────┤                                                         ║
  ║  │  Organisms  │ ← Complex UI (Windows, Panels)                         ║
  ║  └─────────────┘                                                         ║
  ║                                                                          ║
  ║  COLOR PALETTE:                                                          ║
  ║  ─────────────────────────────────────────────────────────               ║
  ║  Primary:    #4ECDC4 (Teal)     - Actions, active states                ║
  ║  Secondary:  #45B7AA (Dark Teal)- Hover states                          ║
  ║  Success:    #2ECC71 (Green)    - Enabled, positive                     ║
  ║  Warning:    #F1C40F (Yellow)   - Caution, attention                    ║
  ║  Danger:     #E74C3C (Red)      - Errors, critical                      ║
  ║  Info:       #3498DB (Blue)     - Information, links                    ║
  ║                                                                          ║
  ║  Neutrals:                                                               ║
  ║  Surface:    #1a1a2e (Dark)     - Backgrounds                           ║
  ║  Card:       #252542 (Lighter)  - Cards, panels                         ║
  ║  Border:     #3d3d5c            - Subtle borders                        ║
  ║  Text:       #f5f5f5            - Primary text                          ║
  ║  TextMuted:  #a0a0a0            - Secondary text                        ║
  ║                                                                          ║
  ╚══════════════════════════════════════════════════════════════════════════╝
*/

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 1: ATOMIC COMPONENTS - Base building blocks
   ═══════════════════════════════════════════════════════════════════════════ */

/*
  NexLabel - Base text element with consistent typography
  Usage: Simple text display with predefined styles
*/
NexLabel < Label
  font: verdana-11px-rounded
  color: #f5f5f5
  text-auto-resize: true

/*
  NexLabelMuted - Secondary/helper text
  Usage: Descriptions, hints, secondary information
*/
NexLabelMuted < Label
  font: verdana-11px-rounded
  color: #a0a0a0
  text-auto-resize: true

/*
  NexLabelTitle - Section headers with accent color
  Usage: Panel titles, section headers
*/
NexLabelTitle < Label
  font: verdana-11px-rounded
  color: #4ECDC4
  text-auto-resize: true

/*
  NexLabelSuccess - Positive/enabled state text
*/
NexLabelSuccess < Label
  font: verdana-11px-rounded
  color: #2ECC71
  text-auto-resize: true

/*
  NexLabelDanger - Error/critical state text
*/
NexLabelDanger < Label
  font: verdana-11px-rounded
  color: #E74C3C
  text-auto-resize: true

/*
  NexLabelInfo - Informational text
*/
NexLabelInfo < Label
  font: verdana-11px-rounded
  color: #3498DB
  text-auto-resize: true

/* ─────────────────────────────────────────────────────────────────────────── */
/*  BUTTONS                                                                    */
/* ─────────────────────────────────────────────────────────────────────────── */

/*
  NexButton - Primary action button with modern styling
  Usage: Main actions, confirmations
*/
NexButton < Button
  font: cipsoftFont
  height: 21
  text-offset: 0 0
  image-color: #4ECDC4
  color: #f5f5f5

  $hover !disabled:
    image-color: #45B7AA
    color: #ffffff

  $pressed:
    image-color: #3a9c92
    text-offset: 1 1

  $disabled:
    image-color: #555555
    color: #888888

/*
  NexButtonSecondary - Less prominent actions
  Usage: Cancel, secondary options
*/
NexButtonSecondary < Button
  font: cipsoftFont
  height: 21
  text-offset: 0 0
  image-color: #3d3d5c
  color: #a0a0a0

  $hover !disabled:
    image-color: #4d4d6c
    color: #f5f5f5

  $pressed:
    image-color: #2d2d4c
    text-offset: 1 1

/*
  NexButtonDanger - Destructive actions
  Usage: Delete, reset, dangerous operations
*/
NexButtonDanger < Button
  font: cipsoftFont
  height: 21
  text-offset: 0 0
  image-color: #E74C3C
  color: #ffffff

  $hover !disabled:
    image-color: #c0392b

  $pressed:
    image-color: #a93226
    text-offset: 1 1

/*
  NexButtonSmall - Compact button for tight spaces
  Usage: List item actions, inline controls
*/
NexButtonSmall < Button
  font: cipsoftFont
  height: 17
  width: 40
  text-offset: 0 0

/*
  NexButtonIcon - Icon-only button (e.g., remove, settings)
*/
NexButtonIcon < Button
  font: cipsoftFont
  size: 20 20
  text-offset: 0 0
  image-color: #a0a0a0

  $hover !disabled:
    image-color: #4ECDC4

/* ─────────────────────────────────────────────────────────────────────────── */
/*  INPUTS                                                                     */
/* ─────────────────────────────────────────────────────────────────────────── */

/*
  NexTextEdit - Modern text input with focus states
  Usage: Text entry fields
*/
NexTextEdit < TextEdit
  font: verdana-11px-rounded
  height: 22
  padding: 3 6
  color: #f5f5f5
  selection-color: #4ECDC455
  selection-background-color: #4ECDC4

  $focus:
    border: 1 #4ECDC4

  $disabled:
    color: #666666

/*
  NexSpinBox - Numeric input with increment/decrement
  Usage: Number values, quantities
*/
NexSpinBox < SpinBox
  font: verdana-11px-rounded
  height: 22
  color: #f5f5f5

/*
  NexScrollBar - Styled scrollbar for lists
*/
NexScrollBar < VerticalScrollBar
  step: 14
  pixels-scroll: true

/* ─────────────────────────────────────────────────────────────────────────── */
/*  TOGGLES & CHECKBOXES                                                       */
/* ─────────────────────────────────────────────────────────────────────────── */

/*
  NexToggle - Modern on/off switch (primary module control)
  Usage: Enable/disable modules
*/
NexToggle < BotSwitch
  height: 20
  color: #a0a0a0
  font: verdana-11px-rounded

  $on:
    color: #2ECC71

  $!on:
    color: #a0a0a0

/*
  NexCheckBox - Checkbox with consistent styling
  Usage: Boolean options, feature toggles
*/
NexCheckBox < CheckBox
  font: verdana-11px-rounded
  color: #f5f5f5
  text-offset: 20 2
  height: 20
  width: 200

  $hover !disabled:
    color: #4ECDC4

  $checked:
    color: #2ECC71

  $disabled:
    color: #555555

/*
  NexCheckBoxCompact - Smaller checkbox for lists
*/
NexCheckBoxCompact < CheckBox
  font: verdana-11px-rounded
  color: #f5f5f5
  text-offset: 18 1
  height: 16

/* ─────────────────────────────────────────────────────────────────────────── */
/*  CONTAINERS & PANELS                                                        */
/* ─────────────────────────────────────────────────────────────────────────── */

/*
  NexPanel - Base container with subtle background
  Usage: Grouping related content
*/
NexPanel < Panel
  image-source: /images/ui/panel_flat
  image-border: 4
  padding: 8

/*
  NexCard - Elevated card with border
  Usage: Feature cards, module sections
*/
NexCard < FlatPanel
  image-source: /images/ui/panel_flat
  image-border: 4
  padding: 10
  margin: 3

/*
  NexCardHeader - Card with title area
*/
NexCardHeader < Panel
  height: 24
  margin-bottom: 5

/*
  NexSeparator - Visual divider
*/
NexSeparator < HorizontalSeparator
  margin-top: 8
  margin-bottom: 8

/*
  NexSeparatorVertical - Vertical divider
*/
NexSeparatorVertical < VerticalSeparator
  margin-left: 8
  margin-right: 8

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 2: MOLECULAR COMPONENTS - Composite building blocks
   ═══════════════════════════════════════════════════════════════════════════ */

/*
  NexModuleToggle - Standard module on/off with setup button
  Usage: Main panel for each bot module
  Structure: [Toggle Switch] [Setup Button]
*/
NexModuleToggle < NexCard
  height: 44
  margin-top: 4

  NexToggle
    id: toggle
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 140

  NexButton
    id: setup
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    text: Setup
    width: 50

/*
  NexModuleSimple - Simple toggle without setup
  Usage: Basic on/off features
*/
NexModuleSimple < NexCard
  height: 32
  margin-top: 3

  NexToggle
    id: toggle
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter

/*
  NexProfileButton - Profile selector button (1-5)
  Usage: Switch between saved profiles
*/
NexProfileButton < Button
  font: cipsoftFont
  size: 24 20
  text-offset: 0 0
  color: #a0a0a0

  $on:
    color: #4ECDC4

  $hover !disabled:
    color: #4ECDC4

/*
  NexProfileBar - Row of profile buttons
  Usage: Profile selection in modules
*/
NexProfileBar < Panel
  height: 24

  NexProfileButton
    id: p1
    anchors.left: parent.left
    text: 1

  NexProfileButton
    id: p2
    anchors.left: prev.right
    margin-left: 3
    text: 2

  NexProfileButton
    id: p3
    anchors.left: prev.right
    margin-left: 3
    text: 3

  NexProfileButton
    id: p4
    anchors.left: prev.right
    margin-left: 3
    text: 4

  NexProfileButton
    id: p5
    anchors.left: prev.right
    margin-left: 3
    text: 5

  NexLabelMuted
    id: profileName
    anchors.left: prev.right
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 10
    text: Profile #1
    text-align: right

/*
  NexModuleWithProfiles - Module toggle with profile selector
  Usage: HealBot, AttackBot, TargetBot - modules with multiple configs
*/
NexModuleWithProfiles < NexCard
  height: 70
  margin-top: 4

  NexToggle
    id: toggle
    anchors.top: parent.top
    anchors.left: parent.left
    width: 140

  NexButton
    id: setup
    anchors.top: parent.top
    anchors.right: parent.right
    text: Setup
    width: 50

  NexProfileBar
    id: profiles
    anchors.bottom: parent.bottom
    anchors.left: parent.left
    anchors.right: parent.right

/*
  NexSettingRow - Label + Control row
  Usage: Settings with label on left, control on right
*/
NexSettingRow < Panel
  height: 26
  margin-top: 4

  NexLabel
    id: label
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

/*
  NexSettingToggle - Setting row with checkbox
*/
NexSettingToggle < Panel
  height: 24
  margin-top: 3

  NexCheckBox
    id: check
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

/*
  NexListItem - Standard list item with checkbox and remove
  Usage: Spell lists, item lists, creature lists
*/
NexListItem < Label
  background-color: alpha
  text-offset: 20 2
  focusable: true
  height: 18
  font: verdana-11px-rounded
  color: #e0e0e0

  NexCheckBoxCompact
    id: enabled
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 16
    height: 16

  NexButtonIcon
    id: remove
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    text: ×
    size: 16 16

  $focus:
    background-color: #4ECDC422

  $hover !disabled:
    background-color: #ffffff11

/*
  NexListItemWithIcon - List item with item icon
  Usage: Item/potion/rune lists
*/
NexListItemWithIcon < Label
  background-color: alpha
  text-offset: 40 2
  focusable: true
  height: 20
  font: verdana-11px-rounded
  color: #e0e0e0

  NexCheckBoxCompact
    id: enabled
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 16
    height: 16

  UIItem
    id: icon
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 3
    size: 16 16
    focusable: false

  NexButtonIcon
    id: remove
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    text: ×
    size: 16 16

  $focus:
    background-color: #4ECDC422

/*
  NexAlarmRow - Alarm setting with checkbox and value
  Usage: Health alarm, mana alarm, etc.
*/
NexAlarmRow < Panel
  height: 28
  margin-top: 4

  NexCheckBox
    id: enabled
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexSpinBox
    id: value
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    width: 65

/*
  NexAlarmRowText - Alarm with text input instead of spinner
*/
NexAlarmRowText < Panel
  height: 28
  margin-top: 4

  NexCheckBox
    id: enabled
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexTextEdit
    id: value
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    width: 150

/*
  NexItemSlot - Drag-drop item slot with label
  Usage: Potion selection, equipment slots
*/
NexItemSlot < Panel
  height: 40
  margin-top: 4

  BotItem
    id: item
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexLabelMuted
    id: hint
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 8
    text: Drag item here

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 3: ORGANISM COMPONENTS - Complete UI sections
   ═══════════════════════════════════════════════════════════════════════════ */

/*
  NexWindow - Base window with nExBot styling
  Usage: All popup/config windows
*/
NexWindow < MainWindow
  font: verdana-11px-rounded
  padding: 16

  $focus:
    opacity: 1.0

/*
  NexWindowHeader - Standard window header area
*/
NexWindowHeader < Panel
  height: 30
  margin-bottom: 8

  NexLabelTitle
    id: title
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexSeparator
    anchors.bottom: parent.bottom
    anchors.left: parent.left
    anchors.right: parent.right
    margin-top: 0
    margin-bottom: 0

/*
  NexWindowFooter - Standard window footer with action buttons
*/
NexWindowFooter < Panel
  height: 30

  NexSeparator
    anchors.top: parent.top
    anchors.left: parent.left
    anchors.right: parent.right
    margin-top: 0
    margin-bottom: 0

  NexButton
    id: closeBtn
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    text: Close
    width: 60

/*
  NexTabContent - Scrollable content area for tabs
  Usage: Main content area in tab panels
*/
NexTabContent < ScrollablePanel
  padding: 5
  layout:
    type: verticalBox

/*
  NexSectionHeader - Section title within a panel
*/
NexSectionHeader < Panel
  height: 24
  margin-top: 8
  margin-bottom: 4

  NexLabelTitle
    id: title
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexSeparator
    anchors.bottom: parent.bottom
    anchors.left: parent.left
    anchors.right: parent.right
    margin-top: 0
    margin-bottom: 0

/*
  NexFormGroup - Grouped form fields with header
*/
NexFormGroup < NexCard
  padding: 12
  layout:
    type: verticalBox

/*
  NexTwoColumn - Two-column layout for settings
*/
NexTwoColumn < Panel
  layout:
    type: horizontalBox

  Panel
    id: left
    layout:
      type: verticalBox

  NexSeparatorVertical
    height: 100%

  Panel
    id: right
    layout:
      type: verticalBox

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 4: SPECIALIZED COMPONENTS
   ═══════════════════════════════════════════════════════════════════════════ */

/*
  NexStatusBadge - Status indicator pill
  Usage: Connection status, module status
*/
NexStatusBadge < Label
  font: cipsoftFont
  height: 16
  padding: 2 8
  text-align: center
  color: #ffffff

/*
  NexStatusOnline - Connected/Active status
*/
NexStatusOnline < NexStatusBadge
  background-color: #2ECC71
  text: Online

/*
  NexStatusOffline - Disconnected/Inactive status
*/
NexStatusOffline < NexStatusBadge
  background-color: #E74C3C
  text: Offline

/*
  NexProgressIndicator - Visual progress/health bar
*/
NexProgressIndicator < ProgressBar
  height: 8
  background-color: #1a1a2e

/*
  NexTooltip - Enhanced tooltip styling
*/
NexTooltip < Label
  font: verdana-11px-rounded
  color: #f5f5f5
  background-color: #252542
  padding: 6 10
  opacity: 0.95

/*
  NexBadge - Notification badge/counter
*/
NexBadge < Label
  font: cipsoftFont
  height: 16
  width: 16
  text-align: center
  color: #ffffff
  background-color: #E74C3C

/*
  NexEmptyState - Empty list placeholder
*/
NexEmptyState < Panel
  height: 80

  NexLabelMuted
    anchors.centerIn: parent
    text: No items configured
    text-align: center

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 5: UTILITY CLASSES
   ═══════════════════════════════════════════════════════════════════════════ */

/*
  Spacing utilities - Consistent margins
*/
NexSpaceSmall < Panel
  height: 4

NexSpaceMedium < Panel
  height: 8

NexSpaceLarge < Panel
  height: 16

/*
  Text alignment utilities
*/
NexTextCenter < Label
  font: verdana-11px-rounded
  color: #f5f5f5
  text-align: center

NexTextRight < Label
  font: verdana-11px-rounded
  color: #f5f5f5
  text-align: right

/* ═══════════════════════════════════════════════════════════════════════════
   SECTION 6: LEGACY COMPATIBILITY LAYER
   Maintains backwards compatibility while using new design system
   ═══════════════════════════════════════════════════════════════════════════ */

/* Settings CheckBox for windows */
SettingCheckBox < NexCheckBox
  text-wrap: true
  text-auto-resize: true
  margin-top: 3

/* Extras Window Widgets */
ExtrasScrollBar < Panel
  height: 28
  margin-top: 3

  UIWidget
    id: text
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    text-align: center
    font: verdana-11px-rounded
    color: #f5f5f5
    
  HorizontalScrollBar
    id: scroll
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: prev.bottom
    margin-top: 3
    minimum: 0
    maximum: 10
    step: 1

ExtrasTextEdit < Panel
  height: 40
  margin-top: 7

  UIWidget
    id: text
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: parent.top
    text-align: center
    font: verdana-11px-rounded
    color: #f5f5f5
    
  NexTextEdit
    id: textEdit
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.top: prev.bottom
    margin-top: 5
    minimum: 0
    maximum: 10
    step: 1
    text-align: center

ExtrasItem < Panel
  height: 34
  margin-top: 7
  margin-left: 25
  margin-right: 25

  NexLabel
    id: text
    anchors.left: parent.left
    anchors.verticalCenter: next.verticalCenter

  BotItem
    id: item
    anchors.top: parent.top
    anchors.right: parent.right

ExtrasCheckBox < NexToggle
  height: 20
  margin-top: 7

/* Profile Label for lists */
ProfileLabel < Label
  font: verdana-11px-rounded
  background-color: alpha
  text-offset: 5 2
  focusable: true
  height: 20
  text-align: left
  color: #e0e0e0

  NexButtonSmall
    id: remove
    !text: tr('×')
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    margin-right: 3
    width: 15
    height: 15

  $hover !disabled:
    background-color: #4ECDC422
    color: #ffffff

  $focus:
    background-color: #4ECDC444
    color: #ffffff

/* Alarm widgets */
AlarmCheckBox < Panel
  height: 20
  margin-top: 5
  
  NexCheckBox
    id: tick
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 200

AlarmCheckBoxAndSpinBox < Panel
  height: 20
  margin-top: 5

  NexCheckBox
    id: tick
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 150

  NexSpinBox
    id: value
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    width: 50
    minimum: 0
    maximum: 100

AlarmCheckBoxAndTextEdit < Panel
  height: 20
  margin-top: 5

  NexCheckBox
    id: tick
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 150

  NexTextEdit
    id: text
    anchors.left: prev.right
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 5

/* Item Panel for supply settings */
ItemPanel < NexCard
  height: 38
  margin-top: 3
  padding: 3

  BotItem
    id: id
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexLabelMuted
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 5
    text: Min:
    width: 25

  NexSpinBox
    id: min
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 3
    width: 50
    minimum: 0
    maximum: 9999

  NexLabelMuted
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 8
    text: Max:
    width: 25

  NexSpinBox
    id: max
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 3
    width: 50
    minimum: 0
    maximum: 9999

  NexLabelMuted
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 8
    text: Avg:
    width: 25

  NexSpinBox
    id: avg
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 3
    width: 50
    minimum: 0
    maximum: 9999

/* Stash Item Panel */
StashItem < NexCard
  height: 38
  margin-top: 3
  padding: 3

  BotItem
    id: item
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter

  NexLabel
    id: name
    anchors.left: prev.right
    anchors.verticalCenter: parent.verticalCenter
    margin-left: 8
    width: 150

  NexLabelMuted
    id: slot
    anchors.right: parent.right
    anchors.verticalCenter: parent.verticalCenter
    margin-right: 5
    width: 100
    text-align: right
