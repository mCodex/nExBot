/*
  nExBot Design System - AttackBot Module
  Combat spell and rune automation
*/

/* Attack Source ComboBox */
AttackSourceBoxPopupMenu < ComboBoxPopupMenu
AttackSourceBoxPopupMenuButton < ComboBoxPopupMenuButton
AttackSourceBox < ComboBox
  @onSetup: |
    self:addOption("On Target")
    self:addOption("On Self")

/* Attack Entry in list */
AttackEntry < Label
  background-color: alpha
  text-offset: 18 1
  focusable: true
  height: 16
  font: verdana-11px-rounded

  CheckBox
    id: enabled
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 15
    height: 15
    margin-top: 2
    margin-left: 3

  $focus:
    background-color: #00000055

  Button
    id: remove
    !text: tr('x')
    anchors.right: parent.right
    margin-right: 15
    text-offset: 1 0
    width: 15
    height: 15

/* Rune Entry with item */
RuneEntry < Label
  background-color: alpha
  text-offset: 38 1
  focusable: true
  height: 16
  font: verdana-11px-rounded

  CheckBox
    id: enabled
    anchors.left: parent.left
    anchors.verticalCenter: parent.verticalCenter
    width: 15
    height: 15
    margin-top: 2
    margin-left: 3

  UIItem
    id: id
    anchors.left: prev.right
    margin-left: 2
    anchors.verticalCenter: parent.verticalCenter
    size: 15 15
    focusable: false

  $focus:
    background-color: #00000055

  Button
    id: remove
    !text: tr('x')
    anchors.right: parent.right
    margin-right: 15
    text-offset: 1 0
    width: 15
    height: 15

/* Targeted Spells Panel */
TargetedSpellsPanel < FlatPanel
  size: 490 105

  Label
    id: title
    anchors.verticalCenter: parent.top
    anchors.left: parent.left
    margin-left: 5
    text: Targeted Spells
    color: #bfbfbf
    font: verdana-11px-rounded

  Label
    id: whenLabel
    anchors.left: attackList.right
    anchors.verticalCenter: attackMana.verticalCenter
    margin-left: 7
    font: verdana-11px-rounded
    text: Mana >=

  TextEdit
    id: attackMana
    anchors.left: prev.right
    anchors.top: attackList.top
    margin-left: 5
    width: 40
    font: verdana-11px-rounded

  Label
    id: monsters
    anchors.left: whenLabel.left
    anchors.top: whenLabel.bottom
    text: Min Mobs
    margin-top: 9 
    font: verdana-11px-rounded

  TextEdit
    id: minMonsters
    anchors.left: attackMana.left
    anchors.top: attackMana.bottom   
    margin-top: 4
    width: 40
    font: verdana-11px-rounded

  Label
    id: useSpell
    anchors.left: whenLabel.left
    anchors.top: monsters.bottom
    text: Spell:
    margin-top: 9
    font: verdana-11px-rounded

  TextEdit
    id: spellFormula
    anchors.left: prev.right
    margin-left: 5
    anchors.top: minMonsters.bottom
    width: 120
    margin-top: 5
    font: verdana-11px-rounded

  TextList
    id: attackList
    anchors.left: parent.left
    anchors.bottom: parent.bottom
    anchors.top: parent.top
    padding: 1
    padding-top: 2
    width: 270  
    margin-bottom: 7
    margin-left: 8
    margin-top: 10
    vertical-scrollbar: attackListScrollBar

  VerticalScrollBar
    id: attackListScrollBar
    anchors.top: attackList.top
    anchors.bottom: attackList.bottom
    anchors.right: attackList.right
    step: 14
    pixels-scroll: true

  Button
    id: addSpell
    anchors.right: parent.right
    anchors.bottom: attackList.bottom
    margin-right: 10
    text: Add
    size: 40 17
    font: cipsoftFont

  Button
    id: MoveUp
    anchors.right: prev.left
    anchors.bottom: prev.bottom
    margin-right: 5
    text: Move Up
    size: 55 17
    font: cipsoftFont

  Button
    id: MoveDown
    anchors.right: prev.left
    anchors.bottom: prev.bottom
    margin-right: 5
    text: Move Down
    size: 55 17
    font: cipsoftFont 

/* Area Runes Panel */
AreaRunesPanel < FlatPanel
  size: 490 105

  Label
    id: title
    anchors.verticalCenter: parent.top
    anchors.left: parent.left
    margin-left: 5
    text: Area Runes
    color: #00ff00
    font: verdana-11px-rounded

  Label
    id: minMonsters
    anchors.left: runeList.right
    anchors.top: runeList.top
    text: Min Mobs:
    margin-left: 7
    font: verdana-11px-rounded

  TextEdit
    id: minMonstersValue
    anchors.left: prev.right
    anchors.top: prev.top
    margin-left: 5
    width: 30
    font: verdana-11px-rounded

  Label
    id: runeLabel
    anchors.left: minMonsters.left
    anchors.top: minMonsters.bottom
    text: Rune:
    margin-top: 8 
    font: verdana-11px-rounded

  BotItem
    id: runeId
    anchors.left: runeLabel.right
    anchors.top: minMonstersValue.bottom
    margin-left: 10
    margin-top: 5

  TextList
    id: runeList
    anchors.left: parent.left
    anchors.bottom: parent.bottom
    anchors.top: parent.top
    padding: 1
    padding-top: 2
    width: 270  
    margin-bottom: 7
    margin-left: 8
    margin-top: 10
    vertical-scrollbar: runeListScrollBar

  VerticalScrollBar
    id: runeListScrollBar
    anchors.top: runeList.top
    anchors.bottom: runeList.bottom
    anchors.right: runeList.right
    step: 14
    pixels-scroll: true

  Button
    id: addRune
    anchors.right: parent.right
    anchors.bottom: runeList.bottom
    margin-right: 10
    text: Add
    size: 40 17
    font: cipsoftFont

  Button
    id: MoveUp
    anchors.right: prev.left
    anchors.bottom: prev.bottom
    margin-right: 5
    text: Move Up
    size: 55 17
    font: cipsoftFont

  Button
    id: MoveDown
    anchors.right: prev.left
    anchors.bottom: prev.bottom
    margin-right: 5
    text: Move Down
    size: 55 17
    font: cipsoftFont

/* Targeted Runes Panel */
TargetedRunesPanel < FlatPanel
  size: 490 105

  Label
    id: title
    anchors.verticalCenter: parent.top
    anchors.left: parent.left
    margin-left: 5
    text: Targeted Runes
    color: #ff4513
    font: verdana-11px-rounded

  Label
    id: whenLabel
    anchors.left: targetRuneList.right
    anchors.verticalCenter: runeSource.verticalCenter
    margin-left: 7
    font: verdana-11px-rounded
    text: Type

  AttackSourceBox
    id: runeSource
    anchors.left: prev.right
    anchors.top: targetRuneList.top
    margin-left: 10
    width: 100
    font: verdana-11px-rounded

  Label
    id: minMobs
    anchors.left: whenLabel.left
    anchors.top: whenLabel.bottom
    text: Min Mobs:
    margin-top: 9 
    font: verdana-11px-rounded

  TextEdit
    id: minMobsValue
    anchors.left: prev.right
    anchors.top: runeSource.bottom
    margin-left: 5
    margin-top: 4
    width: 30
    font: verdana-11px-rounded

  Label
    id: runeLabel
    anchors.left: whenLabel.left
    anchors.top: minMobs.bottom
    text: Rune:
    margin-top: 15
    font: verdana-11px-rounded

  BotItem
    id: targetRuneId
    anchors.left: prev.right
    anchors.top: minMobsValue.bottom
    margin-left: 10
    margin-top: 5

  TextList
    id: targetRuneList
    anchors.left: parent.left
    anchors.bottom: parent.bottom
    anchors.top: parent.top
    padding: 1
    padding-top: 2
    width: 270  
    margin-bottom: 7
    margin-left: 8
    margin-top: 10
    vertical-scrollbar: targetRuneListScrollBar

  VerticalScrollBar
    id: targetRuneListScrollBar
    anchors.top: targetRuneList.top
    anchors.bottom: targetRuneList.bottom
    anchors.right: targetRuneList.right
    step: 14
    pixels-scroll: true

  Button
    id: addTargetRune
    anchors.right: parent.right
    anchors.bottom: targetRuneList.bottom
    margin-right: 10
    text: Add
    size: 40 17
    font: cipsoftFont

  Button
    id: MoveUp
    anchors.right: prev.left
    anchors.bottom: prev.bottom
    margin-right: 5
    text: Move Up
    size: 55 17
    font: cipsoftFont

  Button
    id: MoveDown
    anchors.right: prev.left
    anchors.bottom: prev.bottom
    margin-right: 5
    text: Move Down
    size: 55 17
    font: cipsoftFont

/* Attacker Panel */
AttackerPanel < Panel
  size: 510 350

  TargetedSpellsPanel
    id: spells
    anchors.top: parent.top
    margin-top: 8
    anchors.left: parent.left

  AreaRunesPanel
    id: areaRunes
    anchors.top: prev.bottom
    anchors.left: parent.left
    margin-top: 10

  TargetedRunesPanel
    id: targetRunes
    anchors.top: prev.bottom
    anchors.left: parent.left
    margin-top: 10

/* AttackBot Settings Panel */
AttackBotSettingsPanel < Panel
  size: 500 330
  padding-top: 8

  FlatPanel
    id: settings
    anchors.fill: parent
    margin-right: 240
    padding-left: 6
    padding-right: 6
    padding-top: 6
    layout:
      type: verticalBox

    Label
      text: Attack Settings
      text-align: center
      font: verdana-11px-rounded

    HorizontalSeparator
      margin-top: 3

    SettingCheckBox
      id: CheckMana
      text: Check mana before casting
      margin-top: 10

    SettingCheckBox
      id: CheckCooldown
      text: Check spell cooldowns

    SettingCheckBox
      id: WaitForTarget
      text: Wait for target before attacking

    SettingCheckBox
      id: SafeMode
      text: Safe mode (don't attack players)

  VerticalSeparator
    anchors.top: prev.top
    anchors.bottom: prev.bottom
    anchors.left: prev.right
    margin-left: 8

  FlatPanel
    id: profiles
    anchors.fill: parent
    anchors.left: prev.left
    margin-left: 8
    margin-right: 8
    padding: 8

    Label
      text: Profile Settings
      text-align: center
      anchors.top: parent.top
      anchors.left: parent.left
      anchors.right: parent.right
      font: verdana-11px-rounded

    HorizontalSeparator
      anchors.top: prev.bottom
      anchors.left: parent.left
      anchors.right: parent.right

    Label
      anchors.top: prev.bottom
      margin-top: 30
      anchors.left: parent.left
      anchors.right: parent.right
      text-align: center
      font: verdana-11px-rounded
      text: Profile Name:

    TextEdit
      id: Name
      anchors.top: prev.bottom
      margin-top: 3
      anchors.left: parent.left
      anchors.right: parent.right     

    Button
      id: ResetSettings
      anchors.bottom: parent.bottom
      anchors.horizontalCenter: parent.horizontalCenter
      text: Reset Current Profile
      text-auto-resize: true
      color: #ff4513

/* Main AttackBot Window */
AttackBotWindow < MainWindow
  !text: tr('Attack Bot')
  size: 520 430
  @onEscape: self:hide()

  Label
    id: title
    anchors.left: parent.left
    anchors.top: parent.top
    margin-left: 2
    !text: tr('Configure your attack spells and runes')
    text-align: left
    font: verdana-11px-rounded
    color: #aeaeae  

  AttackerPanel
    id: attacker
    anchors.top: prev.bottom
    anchors.left: parent.left

  AttackBotSettingsPanel
    id: settings
    anchors.top: title.bottom
    anchors.left: parent.left
    visible: false
    
  HorizontalSeparator
    id: separator
    anchors.right: parent.right
    anchors.left: parent.left
    anchors.bottom: closeButton.top
    margin-bottom: 8    

  Button
    id: closeButton
    !text: tr('Close')
    font: cipsoftFont
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    size: 45 21
    margin-right: 5

  Button
    id: settingsButton
    !text: tr('Settings')
    font: cipsoftFont
    anchors.left: parent.left
    anchors.bottom: parent.bottom
    size: 45 21
